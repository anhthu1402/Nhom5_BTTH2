<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <title>Document</title>
    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }

      #back {
        position: absolute;
        bottom: 20px;
      }

      #back i {
        background-image: url(app/public/img/back.svg);
        background-repeat: no-repeat;
        display: inline-block;
        width: 100px;
        height: 25px;
        padding-left: 25px;
        padding-top: 2px;
        margin: 10px;
        cursor: pointer;
        background-size: 20px;
      }
    </style>
    <link
      rel="stylesheet"
      href="https://js.arcgis.com/4.16/esri/themes/light/main.css"
    />
    <script src="https://js.arcgis.com/4.16/"></script>
    <script>
      require([
        "esri/Map",
        "esri/views/SceneView",
        "esri/layers/GeoJSONLayer",
        "esri/layers/SceneLayer",
        "esri/layers/GraphicsLayer",
        "esri/Graphic",
        "esri/request",
        "esri/geometry/Mesh",
        "esri/geometry/Point",
      ], function (
        Map,
        SceneView,
        GeoJSONLayer,
        SceneLayer,
        GraphicsLayer,
        Graphic,
        esriRequest,
        Mesh,
        Point
      ) {
        var createGraphic = function (data) {
          return new Graphic({
            geometry: data,
            symbol: data.symbol,
            attributes: data,
            popupTemplate: data.popupTemplate,
          });
        };

        // background1
        const background1 = new GeoJSONLayer({
          url: "./GeoJSON/background1.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 7,
                  material: {
                    color: "#d9c3a3",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        // background2
        const background2 = new GeoJSONLayer({
          url: "./GeoJSON/background2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "#cfcfcf",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
         //background 3
         const background3 = new GeoJSONLayer({
          url: "./GeoJSON/background3.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "#dacdc0",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
         //border //frame
         const frame1 = new GeoJSONLayer({
          url: "./GeoJSON/frame/frame_1.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1.5,
                  material: {
                    color: "smoke",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const frame2 = new GeoJSONLayer({
          url: "./GeoJSON/frame/frame_2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const frame3 = new GeoJSONLayer({
          url: "./GeoJSON/frame/frame_3.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.5,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const zoneB_wall1 = new GeoJSONLayer({
          url: "./GeoJSON/A/walls/wall1.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 5,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        const b_stair_lvl1 = new GeoJSONLayer({
          url: "./GeoJSON/B/stair/stair_level1.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        const b_stair_lvl2 = new GeoJSONLayer({
          url: "./GeoJSON/B/stair/stair_level2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        const b_stair_lvl3 = new GeoJSONLayer({
          url: "./GeoJSON/B/stair/stair_level3.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        const b_stair_lvl4 = new GeoJSONLayer({
          url: "./GeoJSON/B/stair/stair_level4.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        const b_stair_lvl5 = new GeoJSONLayer({
          url: "./GeoJSON/B/stair/stair_level5.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        const b_stair_lvl6 = new GeoJSONLayer({
          url: "./GeoJSON/B/stair/stair_level6.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        const b_stair_lvl7 = new GeoJSONLayer({
          url: "./GeoJSON/B/stair/stair_level7.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        const b_stair_lvl8 = new GeoJSONLayer({
          url: "./GeoJSON/B/stair/stair_level8.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        const b_stair_handle_left = new GeoJSONLayer({
          url: "./GeoJSON/B/stair/handle_left.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 10,
                  material: {
                    color: "#d7cfbd",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        const b_stair_handle_right = new GeoJSONLayer({
          url: "./GeoJSON/B/stair/handle_right.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 10,
                  material: {
                    color: "#d7cfbd",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        //column 
        const zoneA_column123 = new GeoJSONLayer({
          url: "./GeoJSON/A/Columns/column123.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 19.3,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        //column 
        const zoneB_column123 = new GeoJSONLayer({
          url: "./GeoJSON/B/columns/column123.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 19.3,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        const zoneB_column123_beside = new GeoJSONLayer({
          url: "./GeoJSON/B/Block123/column/column.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 19.3,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        const zoneB_column45678 = new GeoJSONLayer({
          url: "./GeoJSON/B/columns/column45678.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 19.3,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        //front A 
        const zoneB_frontA_column = new GeoJSONLayer({
          url: "./GeoJSON/B/Block45678/floor1/column/collumn_1.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 25.3,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        //black column
        const zoneB_block45678_black_column = new GeoJSONLayer({
          url: "./GeoJSON/B/Block45678/floor1/column/column_small.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 7,
                  material: {
                    color: "gray",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        //B floor 1 inside columns decor
        const b_floor1_inside_columns_decor = new GeoJSONLayer({
          url: "./GeoJSON/B/Block45678/floor1/column/column_decor.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "white",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        //B floor 1 room
        const b_floor1_room = new GeoJSONLayer({
          url: "./GeoJSON/B/Block45678/floor1/room/room.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 8,
                  material: {
                    color: "smoke",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });
        //b floor 1 room
        const b_floor1_room_door = new GeoJSONLayer({
          url: "./GeoJSON/B/Block45678/floor1/room/door.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 2.85,
                  material: {
                    color: "brown",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const map = new Map({
          basemap: "topo-vector",
          ground: "world-elevation",
          layers: [
            frame1,
            frame2,
            frame3,
            background1,
            background2,
            background3,
            zoneB_wall1,
            b_stair_lvl1,
            b_stair_lvl2,
            b_stair_lvl3,
            b_stair_lvl4,
            b_stair_lvl5,
            b_stair_lvl6,
            b_stair_lvl7,
            b_stair_lvl8,
            b_stair_handle_left,
            b_stair_handle_right,
            zoneB_column123,
            zoneB_column123_beside,
            zoneB_column45678,
            zoneB_frontA_column,
            zoneB_block45678_black_column,
            b_floor1_inside_columns_decor,
            b_floor1_room,
            b_floor1_room_door
            
          ], //end layers
        });

        const view = new SceneView({
          container: "viewDiv",
          map: map,
          camera: {
            position: [106.69495037907745, 10.77410539190575, 230],
            heading: 0,
            tilt: 55,
          },
        });

        view.popup.defaultPopupTemplateEnabled = true;

      var list_points = [];
      var string_points = "";

      function copyTextToClipboard(text) {
        if (!navigator.clipboard) {
          fallbackCopyTextToClipboard(text);
          return;
        }
        navigator.clipboard.writeText(text).then(
          function () {
            console.log("Async: Copying to clipboard was successful!");
          },
          function (err) {
            console.error("Async: Could not copy text: ", err);
          }
        );
      }
        view.popup.autoOpenEnabled = false; // Disable the default popup behavior
        view.on("click", function (event) {
          // Listen for the click event
          view.hitTest(event).then(function (hitTestResults) {
            // Search for features where the user clicked
            if (hitTestResults.results) {
              list_points.push([
                event.mapPoint.longitude,
                event.mapPoint.latitude,
              ]);
              string_points +=
                "[" +
                event.mapPoint.longitude +
                ", " +
                event.mapPoint.latitude +
                "],";
              copyTextToClipboard(string_points);
              // console.log(list_points);
            }
          });
        });
      });
    </script>
  </head>
  <body>
    <div id="viewDiv"></div>
  </body>
</html>
