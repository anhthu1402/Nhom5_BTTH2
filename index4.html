<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Document</title>
  <style>
    html,
    body,
    #viewDiv {
      padding: 0;
      margin: 0;
      height: 100%;
      width: 100%;
    }

    #back {
      position: absolute;
      bottom: 20px;
    }

    #back i {
      background-image: url(app/public/img/back.svg);
      background-repeat: no-repeat;
      display: inline-block;
      width: 100px;
      height: 25px;
      padding-left: 25px;
      padding-top: 2px;
      margin: 10px;
      cursor: pointer;
      background-size: 20px;
    }
  </style>
  <link rel="stylesheet" href="https://js.arcgis.com/4.16/esri/themes/light/main.css" />
  <script src="https://js.arcgis.com/4.16/"></script>
  <link rel="stylesheet" href="https://js.arcgis.com/4.16/esri/themes/light/main.css" />
  <script src="https://js.arcgis.com/4.16/"></script>
  <script>

    var list_points = [];
    var string_points = "";

    function copyTextToClipboard(text) {
      if (!navigator.clipboard) {
        fallbackCopyTextToClipboard(text);
        return;
      }
      navigator.clipboard.writeText(text).then(
        function () {
          console.log("Async: Copying to clipboard was successful!");
        },
        function (err) {
          console.error("Async: Could not copy text: ", err);
        }
      );
    }

    require([
      "esri/Map",
      "esri/views/SceneView",
      "esri/layers/GeoJSONLayer",
      "esri/layers/SceneLayer",
      "esri/layers/GraphicsLayer",
      "esri/Graphic",
      "esri/request",
      "esri/geometry/Mesh",
      "esri/geometry/Point",
    ], function (
      Map,
      SceneView,
      GeoJSONLayer,
      SceneLayer,
      GraphicsLayer,
      Graphic,
      esriRequest,
      Mesh,
      Point
    ) {
      var createGraphic = function (data) {
        return new Graphic({
          geometry: data,
          symbol: data.symbol,
          attributes: data,
          popupTemplate: data.popupTemplate,
        });
      };

      require([
        "esri/Map",
        "esri/views/SceneView",
        "esri/layers/GeoJSONLayer",
        "esri/layers/SceneLayer",
        "esri/layers/GraphicsLayer",
        "esri/Graphic",
        "esri/request",
        "esri/geometry/Mesh",
        "esri/geometry/Point",
        "esri/symbols/PointSymbol3D",
        "esri/symbols/ObjectSymbol3DLayer",
      ], function (
        Map,
        SceneView,
        GeoJSONLayer,
        SceneLayer,
        GraphicsLayer,
        Graphic,
        esriRequest,
        Mesh,
        Point,
        PointSymbol3D,
        ObjectSymbol3DLayer
      ) {
        var createGraphic = function (data) {
          return new Graphic({
            geometry: data,
            symbol: data.symbol,
            attributes: data,
            popupTemplate: data.popupTemplate,
          });
        };

        const background1 = new GeoJSONLayer({
          url: "./GeoJSON/background1.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 8,
                  material: {
                    color: "smoke",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        //frame
        const frame1 = new GeoJSONLayer({
          url: "./GeoJSON/frame/frame_1.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1.5,
                  material: {
                    color: "smoke",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const frame2 = new GeoJSONLayer({
          url: "./GeoJSON/frame/frame_2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const frame3 = new GeoJSONLayer({
          url: "./GeoJSON/frame/frame_3.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.5,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const border2 = new GeoJSONLayer({
          url: "./GeoJSON/border/border_2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const border3 = new GeoJSONLayer({
          url: "./GeoJSON/border/border_3.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.5,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const stair = new GeoJSONLayer({
          url: "./GeoJSON/block4/stair/stair.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.5,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const d_star_handle_left = new GeoJSONLayer({
          url: "./GeoJSON/block4/stair/handle_left.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 10,
                  material: {
                    color: "#d7cfbd",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const d_star_handle_right = new GeoJSONLayer({
          url: "./GeoJSON/block4/stair/handle_right.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 10,
                  material: {
                    color: "#d7cfbd",
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });


        const block1_left = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block1_left.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 3,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        // var createGraphic = function (data) {
        //   var treeSymbol = new PointSymbol3D({
        //     symbolLayers: [new ObjectSymbol3DLayer({
        //       resource: { primitive: "cone" },
        //       width: 4,  // Width of the tree base in meters
        //       height: 4, // Height of the tree in meters
        //       material: { color: "green" }
        //     })]
        //   });

        //   return new Graphic({
        //     geometry: data, // Replace with your Point geometry
        //     symbol: treeSymbol,
        //     attributes: data,
        //     popupTemplate: data.popupTemplate
        //   });
        // };

        const block1_right = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block1_right.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 3,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_1_1 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_1_1.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.2,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_1_2 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_1_2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.2,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_1_3 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_1_3.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 3.2,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_1_4 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_1_4.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 3.2,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_2_1 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_2_1.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.2,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_2_2 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_2_2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.2,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_2_3 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_2_3.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 3.2,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            }
          }
        });

        const block_6_1 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_6_1.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 10,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_6_2 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_6_2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 10,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_6_3 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_6_3.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 10,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_6_4 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_6_4.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 10,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_6_5 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_6_5.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 2.5,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_6_6 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_6_6.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 2.8,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_6_7 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_6_7.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1.5,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_6_8 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_6_8.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.1,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const window_top_bottom_1 = new GeoJSONLayer({
          url: "./GeoJSON/block4/window/window_top_bottom_1.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.2,
                  material: {
                    color: "#d9c3a3",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const window_top_bottom_2 = new GeoJSONLayer({
          url: "./GeoJSON/block4/window/window_top_bottom_2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.2,
                  material: {
                    color: "#d9c3a3",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const window_top_bottom_3 = new GeoJSONLayer({
          url: "./GeoJSON/block4/window/window_top_bottom_3.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.2,
                  material: {
                    color: "#d9c3a3",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        // side window _ side a
        const window_side_1 = new GeoJSONLayer({
          url: "./GeoJSON/block4/window/side_window_left_right_1.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 5,
                  material: {
                    color: "#d9c3a3",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const window_side_2 = new GeoJSONLayer({
          url: "./GeoJSON/block4/window/side_window_left_right_2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 5,
                  material: {
                    color: "#d9c3a3",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const window_side_3 = new GeoJSONLayer({
          url: "./GeoJSON/block4/window/side_window_left_right_3.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 5,
                  material: {
                    color: "#d9c3a3",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const main_door = new GeoJSONLayer({
          url: "./GeoJSON/block4/door/main_door.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 5,
                  material: {
                    color: [255, 254, 154, 0.2],
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_2_4 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_2_4.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 3.2,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_3_1 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_3_1.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.2,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_3_2 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_3_2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.2,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_3_3 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_3_3.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 3.2,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_3_4 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_3_4.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 3.2,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_4_1 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_4_1.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.2,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_4_2 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_4_2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.2,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_4_3 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_4_3.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 3.2,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_4_4 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_4_4.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 3.2,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_5_1 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_5_1.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.7,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const block_5_2 = new GeoJSONLayer({
          url: "./GeoJSON/block4/block/block_5_2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.7,
                  material: {
                    color: "#f9f5ed",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const background2 = new GeoJSONLayer({
          url: "./GeoJSON/background2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "#cfcfcf",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const background3 = new GeoJSONLayer({
          url: "./GeoJSON/background3.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "#dacdc0",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        //border
        const border1 = new GeoJSONLayer({
          url: "./GeoJSON/border/border_1.geojson",
          //bside wall 1
          // const wall_1 = new GeoJSONLayer({
          //   url: "./GeoJSON/block4/wall/wall_4.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 5,
                  material: {
                    color: '#fbedd7'
                    //[251, 237, 215, 0.2],
                  },
                  edges: {
                    type: "solid",
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        // roof
        const roof1 = new GeoJSONLayer({
          url: "./GeoJSON/block4_above/roofs/roof1.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1.5,
                  material: {
                    color: "#dacdc0",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        //roof2
        const roof2 = new GeoJSONLayer({
          url: "./GeoJSON/roof/roof2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "#e9cb8a",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        //roof3
        const roof3 = new GeoJSONLayer({
          url: "./GeoJSON/roof/roof3.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.4,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });


        const pillars = new GeoJSONLayer({
          url: "./GeoJSON/block4_above/pillars/pillars.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 19.3,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const pillars2 = new GeoJSONLayer({
          url: "./GeoJSON/block4_above/pillars/pillars2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1,
                  material: {
                    color: "gray",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const pillars_door = new GeoJSONLayer({
          url: "./GeoJSON/block4_above/pillars/pillars_door.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 12.7,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const walls = new GeoJSONLayer({
          url: "./GeoJSON/block4_above/walls/walls.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 12.1,
                  material: {
                    color: "#ffecd4",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const walls2 = new GeoJSONLayer({
          url: "./GeoJSON/block4_above/walls/walls2.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 121 / 75,
                  material: {
                    color: "#white",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const walls3 = new GeoJSONLayer({
          url: "./GeoJSON/block4_above/walls/walls3.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 121 / 75,
                  material: {
                    color: "#white",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const walls4 = new GeoJSONLayer({
          url: "./GeoJSON/block4_above/walls/walls4.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 2.42,
                  material: {
                    color: "#ffecd4",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const walls5 = new GeoJSONLayer({
          url: "./GeoJSON/block4_above/walls/walls5.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1.21,
                  material: {
                    color: "#ffecd4",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const walls6 = new GeoJSONLayer({
          url: "./GeoJSON/block4_above/walls/walls6.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 16.3,
                  material: {
                    color: "#ffecd4",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });


        const roof_left = new GeoJSONLayer({
          url: "./GeoJSON/block4_above/roofs/roof_left.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 2,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const roof_right = new GeoJSONLayer({
          url: "./GeoJSON/block4_above/roofs/roof_right.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 2,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const roof_left_roof = new GeoJSONLayer({
          url: "./GeoJSON/block4_above/roofs/roof_left_roof.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.3,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const roof_right_roof = new GeoJSONLayer({
          url: "./GeoJSON/block4_above/roofs/roof_right_roof.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.3,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        const roof_innner_border = new GeoJSONLayer({
          url: "./GeoJSON/block4_above/roofs/roof_inner_border.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.2,
                  material: {
                    color: "#fbedd7",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });


        const door_handle = new GeoJSONLayer({
          url: "./GeoJSON/block4/door/door_handle.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.3,
                  material: {
                    color: "#8A8A8A",
                  },
                  edges: {
                    type: "solid", // autocasts as new SolidEdges3D()
                    color: "transparent",
                  },
                },
              ],
            },
          },
        });

        

        

        const map = new Map({
          basemap: "topo-vector",
          ground: "world-elevation",
          layers: [
            frame1,
            frame3,
            frame2,
            d_star_handle_left,
            d_star_handle_right,
            stair,
            block1_left,
            block1_right,
            block_1_1,
            block_1_2,
            block_1_3,
            block_1_4,
            block_2_1,
            block_2_2,
            block_2_3,
            block_2_4,
            block_3_1,
            block_3_2,
            block_3_3,
            block_3_4,
            block_4_1,
            block_4_2,
            block_4_3,
            block_4_4,
            block_5_1,
            block_5_2,
            block_6_1,
            block_6_2,
            block_6_3,
            block_6_4,
            block_6_5,
            block_6_6,
            block_6_7,
            block_6_8,
            window_top_bottom_1,
            window_top_bottom_2,
            window_top_bottom_3,
            window_side_1,
            window_side_2,
            window_side_3,
            main_door,
            d_star_handle_left,
            d_star_handle_right,
            stair,
            block1_left,
            block1_right,
            border1,
            border2,
            border3,
            roof1,
            roof2,
            roof3,
            background1,
            background2,
            background3,
            pillars,
            pillars2,
            pillars_door,
            walls,
            walls2,
            walls3,
            walls4,
            walls5,
            walls6,
            roof_left,
            roof_right,
            roof_left_roof,
            roof_right_roof,
            roof_innner_border,
            door_handle
            // createGraphic
          ], //end layers
        });

        var graphicsLayer = new GraphicsLayer();
        map.add(graphicsLayer);

        var treeSymbol = new PointSymbol3D({
          symbolLayers: [new ObjectSymbol3DLayer({
            resource: { primitive: "sphere" },
            width: 2.5,
            height: 8,
            material: { color: "green" }
          })]
        });

        // var treeLocation = new Point({
        //         longitude: 106.6949526110911,
        //         latitude: 10.776735364562983
        //       });
        // var treeGraphic = new Graphic({
        //   geometry: treeLocation,
        //   symbol: treeSymbol
        // });

        // var treeCoordinates = [
        //   { longitude: 106.6949526110911, latitude: 10.776735364562983 },
        //   { longitude: 106.69497101455805, latitude: 10.77671873996881 },
        //   { longitude: 106.6949830958556, latitude: 10.776705701587746 },
        //   // ... và cứ thế
        // ];

        // // Tạo một mảng để chứa các đối tượng Graphic
        // var treeGraphics = [];

        // // Lặp qua mảng tọa độ để tạo các Graphic
        // treeCoordinates.forEach(function(coord) {
        //   var treeLocation = new Point({
        //     longitude: coord.longitude,
        //     latitude: coord.latitude
        //   });
        //   var treeGraphic = new Graphic({
        //     geometry: treeLocation,
        //     symbol: treeSymbol // Giả sử treeSymbol đã được định nghĩa trước đó
        //   });
        //   treeGraphics.push(treeGraphic);
        // });

        //graphicsLayer.add(treeGraphic);

        const view = new SceneView({
          container: "viewDiv",
          map: map,
          camera: {
            position: [106.69495037907745, 10.77410539190575, 230],
            heading: 0,
            tilt: 55,
          },

        });

        view.popup.defaultPopupTemplateEnabled = true;

        view.popup.autoOpenEnabled = false; // Disable the default popup behavior
        view.on("click", function (event) {
          // Listen for the click event
          view.hitTest(event).then(function (hitTestResults) {
            // Search for features where the user clicked
            if (hitTestResults.results) {
              list_points.push([
                event.mapPoint.longitude,
                event.mapPoint.latitude,
              ]);
              string_points +=
                "[" +
                event.mapPoint.longitude +
                ", " +
                event.mapPoint.latitude +
                "],";
              console.log(event.mapPoint.longitude + " " + event.mapPoint.latitude)
              copyTextToClipboard(string_points);
              // console.log(list_points);
            }
          });
        });

        // var graphicsLayer = new GraphicsLayer();
        // map.add(graphicsLayer);

        // var treeSymbol = new PointSymbol3D({
        //   symbolLayers: [new ObjectSymbol3DLayer({
        //     resource: { primitive: "cone" },
        //     width: 5,
        //     height: 10,
        //     material: { color: "green" }
        //   })]
        // });

        // var treeLocation = new Point({
        //         longitude: 106.6949526110911,
        //         latitude: 10.776735364562983
        //       });
        // var treeGraphic = new Graphic({
        //   geometry: treeLocation,
        //   symbol: treeSymbol
        // });

        // graphicsLayer.add(treeGraphic);

        view.on("click", function (event) {
          // Lấy tọa độ mapPoint từ sự kiện
          var point = event.mapPoint;

          // Hiển thị hoặc sử dụng tọa độ
          console.log("Tọa độ:", point.longitude, point.latitude);
          // end
        })
        view.popup.defaultPopupTemplateEnabled = true;
      });
    })
  </script>
</head>

<body>
  <div id="viewDiv"></div>
</body>

</html>

</html>